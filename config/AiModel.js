/*
 * Install the Generative AI SDK
 *
 * $ npm install @google/generative-ai
 */

import {
  GoogleGenerativeAI,
  HarmCategory,
  HarmBlockThreshold,
} from "@google/generative-ai";

const apiKey = process.env.EXPO_PUBLIC_GOOGLE_GEMINI_API_KEY;
const genAI = new GoogleGenerativeAI(apiKey);

const model = genAI.getGenerativeModel({
  model: "gemini-1.5-flash",
});

const generationConfig = {
  temperature: 1,
  topP: 0.95,
  topK: 64,
  maxOutputTokens: 8192,
  responseMimeType: "application/json",
};

export const chatSession = model.startChat({
  generationConfig,
  // safetySettings: Adjust safety settings
  // See https://ai.google.dev/gemini-api/docs/safety-settings
  history: [
    {
      role: "user",
      parts: [
        {
          text: "Generate travel plan for location : Delhi, India , for 3 Days and 2 Night for Family Vacation with a Luxury budget with a flight details , flight price with booking url , Hotels options list with hotel name , hotel address , price , hotel image url , geo coordinates , rating , descriptions and place to visit nearby with place name , place details , place image url , geo coordinates , ticket pricing for each of the location for 3 days and 2 night with each day plan with best time to visit in json format.",
        },
      ],
    },
    {
      role: "model",
      parts: [
        {
          text: '```json\n{\n  "trip": {\n    "destination": "Delhi, India",\n    "duration": "3 days and 2 nights",\n    "budget": "Luxury",\n    "travelers": "Family",\n    "flights": [\n      {\n        "airline": "Air India",\n        "flight_number": "AI 101",\n        "departure_city": "New York",\n        "arrival_city": "Delhi",\n        "departure_date": "2024-03-01",\n        "arrival_date": "2024-03-02",\n        "price": "$1,200",\n        "booking_url": "https://www.airindia.com/"\n      },\n      {\n        "airline": "Emirates",\n        "flight_number": "EK 501",\n        "departure_city": "London",\n        "arrival_city": "Delhi",\n        "departure_date": "2024-03-01",\n        "arrival_date": "2024-03-02",\n        "price": "$1,000",\n        "booking_url": "https://www.emirates.com/"\n      }\n    ],\n    "hotels": [\n      {\n        "name": "The Oberoi, New Delhi",\n        "address": "Dr. Zakir Husain Marg, Chanakyapuri, New Delhi, Delhi 110021, India",\n        "price": "$400 per night",\n        "image_url": "https://www.oberoihotels.com/media/images/hotel/oberoi-new-delhi/25447-Oberoi-New-Delhi-Exterior.jpg",\n        "geo_coordinates": "28.5785, 77.2103",\n        "rating": "4.8",\n        "description": "A luxurious five-star hotel known for its impeccable service, elegant rooms, and world-class dining.",\n        "nearby_places": [\n          {\n            "name": "India Gate",\n            "details": "A war memorial dedicated to the Indian soldiers who died in World War I",\n            "image_url": "https://upload.wikimedia.org/wikipedia/commons/thumb/7/7c/India_Gate_Night_View.jpg/1280px-India_Gate_Night_View.jpg",\n            "geo_coordinates": "28.6130, 77.2296",\n            "ticket_pricing": "Free entry"\n          },\n          {\n            "name": "Rashtrapati Bhavan",\n            "details": "The official residence of the President of India",\n            "image_url": "https://upload.wikimedia.org/wikipedia/commons/thumb/5/50/Rashtrapati_Bhavan_from_the_north.jpg/1280px-Rashtrapati_Bhavan_from_the_north.jpg",\n            "geo_coordinates": "28.6128, 77.2169",\n            "ticket_pricing": "Free entry"\n          }\n        ]\n      },\n      {\n        "name": "The Leela Palace New Delhi",\n        "address": "Diplomatic Enclave, Chanakyapuri, New Delhi, Delhi 110021, India",\n        "price": "$350 per night",\n        "image_url": "https://www.theleela.com/media/images/hotel/leela-palace-new-delhi/4957-Leela-Palace-New-Delhi-Exterior-2.jpg",\n        "geo_coordinates": "28.5794, 77.2087",\n        "rating": "4.7",\n        "description": "A grand and opulent hotel with beautiful gardens, lavish rooms, and fine dining experiences.",\n        "nearby_places": [\n          {\n            "name": "Lodhi Garden",\n            "details": "A serene and beautiful park with historical tombs and monuments",\n            "image_url": "https://upload.wikimedia.org/wikipedia/commons/thumb/a/a8/Lodhi_Garden_Delhi.jpg/1280px-Lodhi_Garden_Delhi.jpg",\n            "geo_coordinates": "28.5871, 77.2209",\n            "ticket_pricing": "Free entry"\n          },\n          {\n            "name": "Khan Market",\n            "details": "A vibrant and upscale market with designer boutiques, restaurants, and cafes",\n            "image_url": "https://upload.wikimedia.org/wikipedia/commons/thumb/5/52/Khan_Market_Delhi.jpg/1280px-Khan_Market_Delhi.jpg",\n            "geo_coordinates": "28.6005, 77.2250",\n            "ticket_pricing": "Free entry"\n          }\n        ]\n      },\n      {\n        "name": "The Imperial, New Delhi",\n        "address": "Janpath, Connaught Place, New Delhi, Delhi 110001, India",\n        "price": "$300 per night",\n        "image_url": "https://www.theimperialindia.com/media/images/hotel/the-imperial-new-delhi/7259-The-Imperial-New-Delhi-Exterior-1.jpg",\n        "geo_coordinates": "28.6280, 77.2234",\n        "rating": "4.6",\n        "description": "A historic hotel with a colonial charm, elegant rooms, and a prime location in Connaught Place.",\n        "nearby_places": [\n          {\n            "name": "Connaught Place",\n            "details": "A bustling commercial hub with shops, restaurants, and entertainment options",\n            "image_url": "https://upload.wikimedia.org/wikipedia/commons/thumb/2/26/Connaught_Place_night_view.jpg/1280px-Connaught_Place_night_view.jpg",\n            "geo_coordinates": "28.6287, 77.2239",\n            "ticket_pricing": "Free entry"\n          },\n          {\n            "name": "National Museum",\n            "details": "A renowned museum showcasing Indian art, history, and culture",\n            "image_url": "https://upload.wikimedia.org/wikipedia/commons/thumb/9/96/National_Museum_India.jpg/1280px-National_Museum_India.jpg",\n            "geo_coordinates": "28.6246, 77.2331",\n            "ticket_pricing": "INR 10 for Indians, INR 500 for foreigners"\n          }\n        ]\n      }\n    ],\n    "itinerary": [\n      {\n        "day": 1,\n        "time": "Morning",\n        "activity": "Visit the Red Fort",\n        "details": "Explore the historic Red Fort, a UNESCO World Heritage Site and a symbol of Mughal architecture.",\n        "image_url": "https://upload.wikimedia.org/wikipedia/commons/thumb/1/16/Red_Fort_Delhi.jpg/1280px-Red_Fort_Delhi.jpg",\n        "geo_coordinates": "28.6561, 77.2387",\n        "ticket_pricing": "INR 10 for Indians, INR 500 for foreigners"\n      },\n      {\n        "day": 1,\n        "time": "Afternoon",\n        "activity": "Have lunch at Karim\'s",\n        "details": "Enjoy a delicious meal at Karim\'s, a renowned restaurant serving traditional Mughlai cuisine.",\n        "image_url": "https://upload.wikimedia.org/wikipedia/commons/thumb/8/84/Karim_s_Restaurant_%28Delhi%29.jpg/1280px-Karim_s_Restaurant_%28Delhi%29.jpg",\n        "geo_coordinates": "28.6453, 77.2383",\n        "ticket_pricing": "Varies depending on the order"\n      },\n      {\n        "day": 1,\n        "time": "Evening",\n        "activity": "Attend a cultural performance at the National Museum",\n        "details": "Experience the rich cultural heritage of India with a traditional dance or music performance at the National Museum.",\n        "image_url": "https://upload.wikimedia.org/wikipedia/commons/thumb/9/96/National_Museum_India.jpg/1280px-National_Museum_India.jpg",\n        "geo_coordinates": "28.6246, 77.2331",\n        "ticket_pricing": "INR 10 for Indians, INR 500 for foreigners"\n      },\n      {\n        "day": 2,\n        "time": "Morning",\n        "activity": "Visit the Lotus Temple",\n        "details": "Explore the unique and serene Lotus Temple, a Baháʼí House of Worship shaped like a lotus flower.",\n        "image_url": "https://upload.wikimedia.org/wikipedia/commons/thumb/f/f4/Lotus_Temple_Interior.jpg/1280px-Lotus_Temple_Interior.jpg",\n        "geo_coordinates": "28.5530, 77.2507",\n        "ticket_pricing": "Free entry"\n      },\n      {\n        "day": 2,\n        "time": "Afternoon",\n        "activity": "Shop at Khan Market",\n        "details": "Browse the designer boutiques, art galleries, and cafes at the upscale Khan Market.",\n        "image_url": "https://upload.wikimedia.org/wikipedia/commons/thumb/5/52/Khan_Market_Delhi.jpg/1280px-Khan_Market_Delhi.jpg",\n        "geo_coordinates": "28.6005, 77.2250",\n        "ticket_pricing": "Free entry"\n      },\n      {\n        "day": 2,\n        "time": "Evening",\n        "activity": "Enjoy a rooftop dinner at a luxury hotel",\n        "details": "Savor a delicious meal with stunning city views from the rooftop of a luxury hotel like The Oberoi or The Leela Palace.",\n        "image_url": "https://www.oberoihotels.com/media/images/hotel/oberoi-new-delhi/25447-Oberoi-New-Delhi-Exterior.jpg",\n        "geo_coordinates": "28.5785, 77.2103",\n        "ticket_pricing": "Varies depending on the hotel and menu"\n      },\n      {\n        "day": 3,\n        "time": "Morning",\n        "activity": "Visit Humayun\'s Tomb",\n        "details": "Explore Humayun\'s Tomb, a magnificent Mughal tomb that served as a precursor to the Taj Mahal.",\n        "image_url": "https://upload.wikimedia.org/wikipedia/commons/thumb/b/b9/Humayuns_Tomb_Delhi.jpg/1280px-Humayuns_Tomb_Delhi.jpg",\n        "geo_coordinates": "28.6135, 77.2354",\n        "ticket_pricing": "INR 10 for Indians, INR 500 for foreigners"\n      },\n      {\n        "day": 3,\n        "time": "Afternoon",\n        "activity": "Go on a guided tour of Old Delhi",\n        "details": "Immerse yourself in the vibrant and bustling Old Delhi, exploring its narrow streets, bazaars, and historical sites with a local guide.",\n        "image_url": "https://upload.wikimedia.org/wikipedia/commons/thumb/a/a8/Chandni_Chowk_Delhi.jpg/1280px-Chandni_Chowk_Delhi.jpg",\n        "geo_coordinates": "28.6559, 77.2308",\n        "ticket_pricing": "Varies depending on the tour operator"\n      },\n      {\n        "day": 3,\n        "time": "Evening",\n        "activity": "Enjoy a farewell dinner at a traditional Indian restaurant",\n        "details": "Indulge in a final delicious meal at a renowned Indian restaurant before heading back to the airport.",\n        "image_url": "https://upload.wikimedia.org/wikipedia/commons/thumb/1/1a/Karim_s_Restaurant_Delhi.jpg/1280px-Karim_s_Restaurant_Delhi.jpg",\n        "geo_coordinates": "28.6453, 77.2383",\n        "ticket_pricing": "Varies depending on the restaurant and menu"\n      }\n    ]\n  }\n}\n```\n\n**Notes:**\n\n* This itinerary is a suggestion and can be customized based on your family\'s interests and preferences.\n* The flight prices are approximate and may vary depending on the time of year and booking date.\n* Hotel prices are also approximate and may vary depending on the season and availability.\n* Ticket prices for attractions are subject to change.\n* Consider booking tours and transportation in advance, especially during peak season.\n* Allow ample time for travel between locations, especially in Delhi\'s traffic.\n* Be sure to factor in time for shopping, dining, and relaxation.\n* Pack comfortable shoes as you will be doing a lot of walking.\n\n**Best Time to Visit:**\n\nDelhi is best visited during the winter months (October-March) when the weather is pleasant and comfortable. The summer months (April-September) are hot and humid. \n\nThis JSON data provides a comprehensive travel plan with detailed information about flights, hotels, places to visit, and daily activities. You can use this data to create your own personalized travel plan for your family vacation to Delhi. \n',
        },
      ],
    },
  ],
});

// const result = await chatSession.sendMessage("INSERT_INPUT_HERE");
// console.log(result.response.text());

//   run();
